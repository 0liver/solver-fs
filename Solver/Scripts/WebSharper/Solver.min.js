(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;$.Define($$,{Solver:{Client:{Solve:function(){var s,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bn;s=function(t){return function(){var v;v="Clicked: "+t.get_Text();if(a){a.log(v);}b("#symbol-popup").data("target").textContent=t.Dom.textContent;b("#symbol-popup").fadeOut();return c.Start(c.Delay(function(){return c.Bind(e.Async("Solver:0",[b("#equation").text()]),function(x){var y;y=b("#equation").removeAttr("class");if(x){y.addClass("success");return c.Return(null);}else{y.addClass("failure");return c.Return(null);}});}),{$:0});};};A=i.ofArray([j.Attr().NewAttr("id","symbol-popup"),j.Attr().NewAttr("style","position: absolute; display: none")]);B=i.ofArray([k.Tags().text("+")]);C=k.Tags().NewTag("kbd",B);l.Events().OnClick(s,C);D=i.ofArray([k.Tags().text("-")]);E=k.Tags().NewTag("kbd",D);l.Events().OnClick(s,E);F=i.ofArray([k.Tags().text("*")]);G=k.Tags().NewTag("kbd",F);l.Events().OnClick(s,G);H=i.ofArray([k.Tags().text("/")]);I=k.Tags().NewTag("kbd",H);l.Events().OnClick(s,I);J=i.ofArray([k.Tags().text("^")]);K=k.Tags().NewTag("kbd",J);l.Events().OnClick(s,K);L=i.ofArray([k.Tags().text("(")]);M=k.Tags().NewTag("kbd",L);l.Events().OnClick(s,M);N=i.ofArray([k.Tags().text(")")]);O=k.Tags().NewTag("kbd",N);l.Events().OnClick(s,O);z=h.add(k.Tags().NewTag("div",A),i.ofArray([C,E,G,I,K,M,O]));P=function(Q){return function(){var S,T,U;S=b(Q.Dom).offset();T=S.top-21;U=S.left;b("#symbol-popup").data("target",Q.Dom).css("top",m(T)+"px").css("left",m(U)+"px").show();return;};};W=i.ofArray([j.Attr().NewAttr("id","equation")]);X=i.ofArray([j.Attr().NewAttr("class","symbol")]);Y=k.Tags().NewTag("a",X);l.Events().OnClick(P,Y);Z=i.ofArray([j.Attr().NewAttr("class","digit")]);_0=i.ofArray([j.Attr().NewAttr("class","symbol")]);_1=k.Tags().NewTag("a",_0);l.Events().OnClick(P,_1);_2=i.ofArray([j.Attr().NewAttr("class","digit")]);_3=i.ofArray([j.Attr().NewAttr("class","symbol")]);_4=k.Tags().NewTag("a",_3);l.Events().OnClick(P,_4);_5=i.ofArray([j.Attr().NewAttr("class","digit")]);_6=i.ofArray([j.Attr().NewAttr("class","symbol")]);_7=k.Tags().NewTag("a",_6);l.Events().OnClick(P,_7);_8=i.ofArray([j.Attr().NewAttr("class","symbol"),k.Tags().text("=")]);_9=k.Tags().NewTag("a",_8);l.Events().OnClick(P,_9);_=i.ofArray([j.Attr().NewAttr("class","symbol")]);ba=k.Tags().NewTag("a",_);l.Events().OnClick(P,ba);bb=i.ofArray([j.Attr().NewAttr("class","digit")]);bc=i.ofArray([j.Attr().NewAttr("class","symbol")]);bd=k.Tags().NewTag("a",bc);l.Events().OnClick(P,bd);be=i.ofArray([j.Attr().NewAttr("class","digit")]);bf=i.ofArray([j.Attr().NewAttr("class","symbol")]);bg=k.Tags().NewTag("a",bf);l.Events().OnClick(P,bg);bh=i.ofArray([j.Attr().NewAttr("class","digit")]);bi=i.ofArray([j.Attr().NewAttr("class","symbol")]);bj=k.Tags().NewTag("a",bi);l.Events().OnClick(P,bj);V=h.add(k.Tags().NewTag("div",W),i.ofArray([Y,k.Tags().NewTag("span",Z),_1,k.Tags().NewTag("span",_2),_4,k.Tags().NewTag("span",_5),_7,_9,ba,k.Tags().NewTag("span",bb),bd,k.Tags().NewTag("span",be),bg,k.Tags().NewTag("span",bh),bj]));bk=b(V.Dom).find(".digit");bl=n.iter(function(bm){b(bk.get(bm-1)).text($$.String(o.New().Next1(10)));},n.toList(p.range(1,6)));b(function(){return bl;});bn=i.ofArray([V,z]);return k.Tags().NewTag("div",bn);},SolveOld:function(){var bo,by,bz,bA,bB,bH,bI,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,ca,cb,cc,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cu,cv;bo=function(){var bq,bs,bt,bu,bv,bw,bx;bq=function(){return o.New().Next1(10);};bs=bq(null);bt=bq(null);bu=bq(null);bv=bq(null);bw=bq(null);bx=bq(null);return $$.String(bs)+$$.String(bt)+$$.String(bu)+"="+$$.String(bv)+$$.String(bw)+$$.String(bx);};bz=i.ofArray([j.Attr().NewAttr("class","laaarge")]);bA=bo(null);by=h.add(k.Tags().NewTag("input",bz),i.ofArray([j.Attr().NewAttr("value",bA)]));bB=function(bC){return function(){var bE;bE=c.Delay(function(){return c.Bind(e.Async("Solver:1",[bC.get_Value()]),function(bG){bC["HtmlProvider@33"].SetStyle(bC.get_Body(),bG);return c.Return(null);});});return c.Start(bE,{$:0});};};l.Events().OnKeyPress(bB,by);bH=by;bI=function(bJ){return function(){var bL,bM;bL="Clicked: "+bJ.get_Text();a?a.log(bL):undefined;bM=m(b.data(bH.Dom,"lastCursorPosition"))<<0;return bH.set_Value(q.Substring(bH.get_Value(),0,bM)+bJ.get_Text()+bH.get_Value().substring(bM));};};bO=i.ofArray([j.Attr().NewAttr("style","position: absolute; display: none")]);bP=i.ofArray([k.Tags().text("+")]);bQ=k.Tags().NewTag("kbd",bP);l.Events().OnClick(bI,bQ);bR=i.ofArray([k.Tags().text("-")]);bS=k.Tags().NewTag("kbd",bR);l.Events().OnClick(bI,bS);bT=i.ofArray([k.Tags().text("*")]);bU=k.Tags().NewTag("kbd",bT);l.Events().OnClick(bI,bU);bV=i.ofArray([k.Tags().text("/")]);bW=k.Tags().NewTag("kbd",bV);l.Events().OnClick(bI,bW);bX=i.ofArray([k.Tags().text("^")]);bY=k.Tags().NewTag("kbd",bX);l.Events().OnClick(bI,bY);bZ=i.ofArray([k.Tags().text("(")]);b0=k.Tags().NewTag("kbd",bZ);l.Events().OnClick(bI,b0);b1=i.ofArray([k.Tags().text(")")]);b2=k.Tags().NewTag("kbd",b1);l.Events().OnClick(bI,b2);bN=h.add(k.Tags().NewTag("div",bO),i.ofArray([bQ,bS,bU,bW,bY,b0,b2]));b3=function(b4){var b5,b6,b7,b8,b9,b_,b$;b5=b4.Dom.selectionStart;b.data(b4.Dom,"lastCursorPosition",b5);b6=b4.Dom;b7=r(b6,b5);if(a){a.log(b7);}b9=b7.top-25;b8=m(b9)+"px";bN["HtmlProvider@33"].SetCss(bN.get_Body(),"top",b8);b$=b7.left-65;b_=m(b$)+"px";bN["HtmlProvider@33"].SetCss(bN.get_Body(),"left",b_);return bN["HtmlProvider@33"].SetCss(bN.get_Body(),"display","");};cb=i.ofArray([j.Attr().NewAttr("class","btn btn-primary btn-xs"),j.Attr().NewAttr("style","float: right;")]);ca=h.add(k.Tags().NewTag("button",cb),i.ofArray([k.Tags().text("Start over")]));cc=function(){return function(){bH["HtmlProvider@33"].SetStyle(bH.get_Body(),"");return bH.set_Value(bo(null));};};l.Events().OnClick(cc,ca);cf=ca;ch=i.ofArray([k.Tags().text("+")]);ci=i.ofArray([k.Tags().text("-")]);cj=i.ofArray([k.Tags().text("*")]);ck=i.ofArray([k.Tags().text("/")]);cl=i.ofArray([k.Tags().text("^")]);cm=i.ofArray([k.Tags().text("(")]);cn=i.ofArray([k.Tags().text(")")]);cg=i.ofArray([k.Tags().NewTag("kbd",ch),k.Tags().NewTag("kbd",ci),k.Tags().NewTag("kbd",cj),k.Tags().NewTag("kbd",ck),k.Tags().NewTag("kbd",cl),k.Tags().NewTag("kbd",cm),k.Tags().NewTag("kbd",cn),cf]);cp=i.ofArray([k.Tags().text(" Use: ")]);cq=i.ofArray([j.Attr().NewAttr("style","position: relative")]);cr=function(cs){return function(){return b3(cs);};};l.Events().OnKeyUp(cr,bH);cu=bH;cv=function(cw){return function(cx){var cy,cz;cy=cx.Y;cz="["+$$.String(cx.X)+", "+$$.String(cy)+"]";a?a.log(cz):undefined;return b3(cw);};};l.Events().OnMouseUp(cv,cu);co=i.ofArray([h.add(k.Tags().NewTag("h4",cp),cg),h.add(k.Tags().NewTag("p",cq),i.ofArray([cu,bN]))]);return k.Tags().NewTag("div",co);}}}});$.OnInit(function(){a=$.Safe($$.console);b=$.Safe($$.jQuery);c=$.Safe($$.WebSharper.Concurrency);d=$.Safe($$.WebSharper.Remoting);e=$.Safe(d.AjaxRemotingProvider);f=$.Safe($$.WebSharper.Html);g=$.Safe(f.Client);h=$.Safe(g.Operators);i=$.Safe($$.WebSharper.List);j=$.Safe(g.Attr);k=$.Safe(g.Tags);l=$.Safe(g.EventsPervasives);m=$.Safe($$.String);n=$.Safe($$.WebSharper.Seq);o=$.Safe($$.WebSharper.Random);p=$.Safe($$.WebSharper.Operators);q=$.Safe($$.WebSharper.Strings);return r=$.Safe($$.getCaretCoordinates);});$.OnLoad(function(){return;});}());
