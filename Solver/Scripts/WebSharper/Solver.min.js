(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;$.Define($$,{Solver:{Client:{Main:function(){var t,u,v,w,x,y,E,F,G,K,L,M;u=d.ofArray([e.Attr().NewAttr("value","")]);t=c.add(f.Tags().NewTag("input",u),$.New(g,{$:0}));v=$.New(g,{$:0});w=f.Tags().NewTag("h1",v);y=function(){return function(A){var B;B=h.Delay(function(){return h.Bind(j.Async("Solver:1",[t.get_Value(),A.CharacterCode]),function(D){w.set_Text(D);return h.Return(null);});});return h.Start(B,{$:0});};};k.Events().OnKeyPress(y,t);E=d.ofArray([f.Tags().text("Send")]);F=f.Tags().NewTag("button",E);G=function(){return function(){return m.Start(t.get_Value(),function(J){return w.set_Text(J);});};};k.Events().OnClick(G,F);K=$.New(g,{$:0});L=d.ofArray([e.Attr().NewAttr("class","text-muted")]);M=d.ofArray([e.Attr().NewAttr("class","jumbotron")]);x=d.ofArray([t,F,f.Tags().NewTag("hr",K),c.add(f.Tags().NewTag("h4",L),d.ofArray([f.Tags().text("The server responded:")])),c.add(f.Tags().NewTag("div",M),d.ofArray([w]))]);return f.Tags().NewTag("div",x);},Solve:function(){var N,X,Y,Z,_0,_5,_6,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,bz,bA,bB,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bZ,b0;N=function(){var P,R,S,T,U,V,W;P=function(){return n.New().Next1(10);};R=P(null);S=P(null);T=P(null);U=P(null);V=P(null);W=P(null);return $$.String(R)+$$.String(S)+$$.String(T)+"="+$$.String(U)+$$.String(V)+$$.String(W);};Y=d.ofArray([e.Attr().NewAttr("class","laaarge")]);Z=N(null);X=c.add(f.Tags().NewTag("input",Y),d.ofArray([e.Attr().NewAttr("value",Z)]));_0=function(_1){return function(){return h.Start(h.Delay(function(){return h.Bind(j.Async("Solver:2",[_1.get_Value()]),function(_4){_1["HtmlProvider@33"].SetStyle(_1.get_Body(),_4);return h.Return(null);});}),{$:0});};};k.Events().OnKeyPress(_0,X);_5=X;_6=function(_7){return function(){var _9,_;_9="Clicked: "+_7.get_Text();if(o){o.log(_9);}_=p(q.data(_5.Dom,"lastCursorPosition"))<<0;return _5.set_Value(r.Substring(_5.get_Value(),0,_)+_7.get_Text()+_5.get_Value().substring(_));};};bb=d.ofArray([e.Attr().NewAttr("style","position: absolute; display: none")]);bc=d.ofArray([f.Tags().text("+")]);bd=d.ofArray([f.Tags().text(" ")]);be=d.ofArray([f.Tags().text("-")]);bf=d.ofArray([f.Tags().text(" ")]);bg=d.ofArray([f.Tags().text("*")]);bh=f.Tags().NewTag("kbd",bg);k.Events().OnClick(_6,bh);bi=d.ofArray([f.Tags().text(" ")]);bj=d.ofArray([f.Tags().text("/")]);bk=d.ofArray([f.Tags().text(" ")]);bl=d.ofArray([f.Tags().text("^")]);bm=d.ofArray([f.Tags().text(" ")]);bn=d.ofArray([f.Tags().text("(")]);bo=d.ofArray([f.Tags().text(" ")]);bp=d.ofArray([f.Tags().text(")")]);ba=c.add(f.Tags().NewTag("div",bb),d.ofArray([f.Tags().NewTag("kbd",bc),f.Tags().NewTag("span",bd),f.Tags().NewTag("kbd",be),f.Tags().NewTag("span",bf),bh,f.Tags().NewTag("span",bi),f.Tags().NewTag("kbd",bj),f.Tags().NewTag("span",bk),f.Tags().NewTag("kbd",bl),f.Tags().NewTag("span",bm),f.Tags().NewTag("kbd",bn),f.Tags().NewTag("span",bo),f.Tags().NewTag("kbd",bp)]));bq=function(br){var bs,bt,bu,bv,bw,bx,by;bs=br.Dom.selectionStart;q.data(br.Dom,"lastCursorPosition",bs);bt=br.Dom;bu=s(bt,bs);if(o){o.log(bu);}bw=bu.top-25;bv=p(bw)+"px";ba["HtmlProvider@33"].SetCss(ba.get_Body(),"top",bv);by=bu.left-65;bx=p(by)+"px";ba["HtmlProvider@33"].SetCss(ba.get_Body(),"left",bx);return ba["HtmlProvider@33"].SetCss(ba.get_Body(),"display","");};bA=d.ofArray([e.Attr().NewAttr("class","btn btn-primary btn-xs"),e.Attr().NewAttr("style","float: right;")]);bz=c.add(f.Tags().NewTag("button",bA),d.ofArray([f.Tags().text("Start over")]));bB=function(){return function(){_5["HtmlProvider@33"].SetStyle(_5.get_Body(),"");return _5.set_Value(N(null));};};k.Events().OnClick(bB,bz);bE=bz;bG=d.ofArray([f.Tags().text("+")]);bH=d.ofArray([f.Tags().text(" ")]);bI=d.ofArray([f.Tags().text("-")]);bJ=d.ofArray([f.Tags().text(" ")]);bK=d.ofArray([f.Tags().text("*")]);bL=d.ofArray([f.Tags().text(" ")]);bM=d.ofArray([f.Tags().text("/")]);bN=d.ofArray([f.Tags().text(" ")]);bO=d.ofArray([f.Tags().text("^")]);bP=d.ofArray([f.Tags().text(" ")]);bQ=d.ofArray([f.Tags().text("(")]);bR=d.ofArray([f.Tags().text(" ")]);bS=d.ofArray([f.Tags().text(")")]);bF=d.ofArray([f.Tags().NewTag("kbd",bG),f.Tags().NewTag("span",bH),f.Tags().NewTag("kbd",bI),f.Tags().NewTag("span",bJ),f.Tags().NewTag("kbd",bK),f.Tags().NewTag("span",bL),f.Tags().NewTag("kbd",bM),f.Tags().NewTag("span",bN),f.Tags().NewTag("kbd",bO),f.Tags().NewTag("span",bP),f.Tags().NewTag("kbd",bQ),f.Tags().NewTag("span",bR),f.Tags().NewTag("kbd",bS),bE]);bU=d.ofArray([f.Tags().text(" Use: ")]);bV=d.ofArray([e.Attr().NewAttr("style","position: relative")]);bW=function(bX){return function(){return bq(bX);};};k.Events().OnKeyUp(bW,_5);bZ=_5;b0=function(b1){return function(b2){var b3,b4;b3=b2.Y;b4="["+$$.String(b2.X)+", "+$$.String(b3)+"]";if(o){o.log(b4);}return bq(b1);};};k.Events().OnMouseUp(b0,bZ);bT=d.ofArray([c.add(f.Tags().NewTag("h4",bU),bF),c.add(f.Tags().NewTag("p",bV),d.ofArray([bZ,ba]))]);return f.Tags().NewTag("div",bT);},Start:function(b4,b5){var b6;b6=h.Delay(function(){return h.Bind(j.Async("Solver:0",[b4]),function(b8){return h.Return(b5(b8));});});return h.Start(b6,{$:0});}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Html);b=$.Safe(a.Client);c=$.Safe(b.Operators);d=$.Safe($$.WebSharper.List);e=$.Safe(b.Attr);f=$.Safe(b.Tags);g=$.Safe(d.T);h=$.Safe($$.WebSharper.Concurrency);i=$.Safe($$.WebSharper.Remoting);j=$.Safe(i.AjaxRemotingProvider);k=$.Safe(b.EventsPervasives);l=$.Safe($$.Solver);m=$.Safe(l.Client);n=$.Safe($$.WebSharper.Random);o=$.Safe($$.console);p=$.Safe($$.String);q=$.Safe($$.jQuery);r=$.Safe($$.WebSharper.Strings);return s=$.Safe($$.getCaretCoordinates);});$.OnLoad(function(){return;});}());
