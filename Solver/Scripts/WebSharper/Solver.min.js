(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;$.Define($$,{Solver:{Client:{Main:function(){var t,u,v,w,x,y,E,F,G,K,L,M;u=d.ofArray([e.Attr().NewAttr("value","")]);t=c.add(f.Tags().NewTag("input",u),$.New(g,{$:0}));v=$.New(g,{$:0});w=f.Tags().NewTag("h1",v);y=function(){return function(A){var B;B=h.Delay(function(){return h.Bind(j.Async("Solver:1",[t.get_Value(),A.CharacterCode]),function(D){w.set_Text(D);return h.Return(null);});});return h.Start(B,{$:0});};};k.Events().OnKeyPress(y,t);E=d.ofArray([f.Tags().text("Send")]);F=f.Tags().NewTag("button",E);G=function(){return function(){return m.Start(t.get_Value(),function(J){return w.set_Text(J);});};};k.Events().OnClick(G,F);K=$.New(g,{$:0});L=d.ofArray([e.Attr().NewAttr("class","text-muted")]);M=d.ofArray([e.Attr().NewAttr("class","jumbotron")]);x=d.ofArray([t,F,f.Tags().NewTag("hr",K),c.add(f.Tags().NewTag("h4",L),d.ofArray([f.Tags().text("The server responded:")])),c.add(f.Tags().NewTag("div",M),d.ofArray([w]))]);return f.Tags().NewTag("div",x);},Solve:function(){var N,X,Y,Z,_0,_5,_6,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bF,bG,bH,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b5,b6;N=function(){var P,R,S,T,U,V,W;P=function(){return n.New().Next1(10);};R=P(null);S=P(null);T=P(null);U=P(null);V=P(null);W=P(null);return $$.String(R)+$$.String(S)+$$.String(T)+"="+$$.String(U)+$$.String(V)+$$.String(W);};Y=d.ofArray([e.Attr().NewAttr("class","laaarge")]);Z=N(null);X=c.add(f.Tags().NewTag("input",Y),d.ofArray([e.Attr().NewAttr("value",Z)]));_0=function(_1){return function(){return h.Start(h.Delay(function(){return h.Bind(j.Async("Solver:2",[_1.get_Value()]),function(_4){_1["HtmlProvider@33"].SetStyle(_1.get_Body(),_4);return h.Return(null);});}),{$:0});};};k.Events().OnKeyPress(_0,X);_5=X;_6=function(_7){return function(){var _9,_;_9="Clicked: "+_7.get_Text();if(o){o.log(_9);}_=p(q.data(_5.Dom,"lastCursorPosition"))<<0;return _5.set_Value(r.Substring(_5.get_Value(),0,_)+_7.get_Text()+_5.get_Value().substring(_));};};bb=d.ofArray([e.Attr().NewAttr("style","position: absolute; display: none")]);bc=d.ofArray([f.Tags().text("+")]);bd=f.Tags().NewTag("kbd",bc);k.Events().OnClick(_6,bd);be=d.ofArray([f.Tags().text(" ")]);bf=d.ofArray([f.Tags().text("-")]);bg=f.Tags().NewTag("kbd",bf);k.Events().OnClick(_6,bg);bh=d.ofArray([f.Tags().text(" ")]);bi=d.ofArray([f.Tags().text("*")]);bj=f.Tags().NewTag("kbd",bi);k.Events().OnClick(_6,bj);bk=d.ofArray([f.Tags().text(" ")]);bl=d.ofArray([f.Tags().text("/")]);bm=f.Tags().NewTag("kbd",bl);k.Events().OnClick(_6,bm);bn=d.ofArray([f.Tags().text(" ")]);bo=d.ofArray([f.Tags().text("^")]);bp=f.Tags().NewTag("kbd",bo);k.Events().OnClick(_6,bp);bq=d.ofArray([f.Tags().text(" ")]);br=d.ofArray([f.Tags().text("(")]);bs=f.Tags().NewTag("kbd",br);k.Events().OnClick(_6,bs);bt=d.ofArray([f.Tags().text(" ")]);bu=d.ofArray([f.Tags().text(")")]);bv=f.Tags().NewTag("kbd",bu);k.Events().OnClick(_6,bv);ba=c.add(f.Tags().NewTag("div",bb),d.ofArray([bd,f.Tags().NewTag("span",be),bg,f.Tags().NewTag("span",bh),bj,f.Tags().NewTag("span",bk),bm,f.Tags().NewTag("span",bn),bp,f.Tags().NewTag("span",bq),bs,f.Tags().NewTag("span",bt),bv]));bw=function(bx){var by,bz,bA,bB,bC,bD,bE;by=bx.Dom.selectionStart;q.data(bx.Dom,"lastCursorPosition",by);bz=bx.Dom;bA=s(bz,by);if(o){o.log(bA);}bC=bA.top-25;bB=p(bC)+"px";ba["HtmlProvider@33"].SetCss(ba.get_Body(),"top",bB);bE=bA.left-65;bD=p(bE)+"px";ba["HtmlProvider@33"].SetCss(ba.get_Body(),"left",bD);return ba["HtmlProvider@33"].SetCss(ba.get_Body(),"display","");};bG=d.ofArray([e.Attr().NewAttr("class","btn btn-primary btn-xs"),e.Attr().NewAttr("style","float: right;")]);bF=c.add(f.Tags().NewTag("button",bG),d.ofArray([f.Tags().text("Start over")]));bH=function(){return function(){_5["HtmlProvider@33"].SetStyle(_5.get_Body(),"");return _5.set_Value(N(null));};};k.Events().OnClick(bH,bF);bK=bF;bM=d.ofArray([f.Tags().text("+")]);bN=d.ofArray([f.Tags().text(" ")]);bO=d.ofArray([f.Tags().text("-")]);bP=d.ofArray([f.Tags().text(" ")]);bQ=d.ofArray([f.Tags().text("*")]);bR=d.ofArray([f.Tags().text(" ")]);bS=d.ofArray([f.Tags().text("/")]);bT=d.ofArray([f.Tags().text(" ")]);bU=d.ofArray([f.Tags().text("^")]);bV=d.ofArray([f.Tags().text(" ")]);bW=d.ofArray([f.Tags().text("(")]);bX=d.ofArray([f.Tags().text(" ")]);bY=d.ofArray([f.Tags().text(")")]);bL=d.ofArray([f.Tags().NewTag("kbd",bM),f.Tags().NewTag("span",bN),f.Tags().NewTag("kbd",bO),f.Tags().NewTag("span",bP),f.Tags().NewTag("kbd",bQ),f.Tags().NewTag("span",bR),f.Tags().NewTag("kbd",bS),f.Tags().NewTag("span",bT),f.Tags().NewTag("kbd",bU),f.Tags().NewTag("span",bV),f.Tags().NewTag("kbd",bW),f.Tags().NewTag("span",bX),f.Tags().NewTag("kbd",bY),bK]);b0=d.ofArray([f.Tags().text(" Use: ")]);b1=d.ofArray([e.Attr().NewAttr("style","position: relative")]);b2=function(b3){return function(){return bw(b3);};};k.Events().OnKeyUp(b2,_5);b5=_5;b6=function(b7){return function(b8){var b9,b_;b9=b8.Y;b_="["+$$.String(b8.X)+", "+$$.String(b9)+"]";if(o){o.log(b_);}return bw(b7);};};k.Events().OnMouseUp(b6,b5);bZ=d.ofArray([c.add(f.Tags().NewTag("h4",b0),bL),c.add(f.Tags().NewTag("p",b1),d.ofArray([b5,ba]))]);return f.Tags().NewTag("div",bZ);},Start:function(b_,b$){var ca;ca=h.Delay(function(){return h.Bind(j.Async("Solver:0",[b_]),function(cc){return h.Return(b$(cc));});});return h.Start(ca,{$:0});}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Html);b=$.Safe(a.Client);c=$.Safe(b.Operators);d=$.Safe($$.WebSharper.List);e=$.Safe(b.Attr);f=$.Safe(b.Tags);g=$.Safe(d.T);h=$.Safe($$.WebSharper.Concurrency);i=$.Safe($$.WebSharper.Remoting);j=$.Safe(i.AjaxRemotingProvider);k=$.Safe(b.EventsPervasives);l=$.Safe($$.Solver);m=$.Safe(l.Client);n=$.Safe($$.WebSharper.Random);o=$.Safe($$.console);p=$.Safe($$.String);q=$.Safe($$.jQuery);r=$.Safe($$.WebSharper.Strings);return s=$.Safe($$.getCaretCoordinates);});$.OnLoad(function(){return;});}());
