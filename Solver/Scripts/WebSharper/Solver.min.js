(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;$.Define($$,{Solver:{Client:{Solve:function(){var r,x,B,E,G,P,Q,W,X,Y,Z,_0,_3;r=function(s){return function(t){var u,v,w;u=a(s.Dom).offset();v=u.top-21;w=u.left-70;a("#symbol-popup").data("target",s.Dom).css("top",b(v)+"px").css("left",b(w)+"px").show();return t.Event.stopPropagation();};};x=function(){var z,A;z=c.ofArray([f.Attr().NewAttr("class","symbol")]);A=g.Tags().NewTag("a",z);h.Events().OnClick(r,A);return A;};B=function(){var D;D=c.ofArray([f.Attr().NewAttr("class","digit")]);return g.Tags().NewTag("span",D);};a(function(){return a(i.document).on("click",function(){return a("#symbol-popup").fadeOut();});});G=function(H){return function(){var J,K,L;J=j.Trim(H.Dom.textContent);K=a("#symbol-popup").data("target");L=a(K);L.text(J).prev(".symbol:empty").remove().end().next(".symbol:empty").remove().end();if(J.length>0){L.before(x(null).Dom).after(x(null).Dom);}return k.Start(k.Delay(function(){return k.Bind(m.Async("Solver:0",[a("#equation").text()]),function(N){var O;O=a("#equation").removeAttr("class");if(N){O.addClass("success");return k.Return(null);}else{O.addClass("failure");return k.Return(null);}});}),{$:0});};};P=[["+","plus"],["\u2212","minus"],["×","times"],["÷","divide"],["^","power"],["(","left parenthesis"],[")","right parenthesis"],[" ","no symbol: treat adjacent digits as one number"]];Q=n.map(function(R){var S,T,U,V;S=R[0];T=R[1];U=c.ofArray([g.Tags().text(S),f.Attr().NewAttr("title",T)]);V=g.Tags().NewTag("kbd",U);h.Events().OnClick(G,V);return V;},P);W=c.ofArray([f.Attr().NewAttr("id","symbol-popup")]);E=o.add(g.Tags().NewTag("div",W),Q);Y=c.ofArray([f.Attr().NewAttr("id","equation")]);X=o.add(g.Tags().NewTag("div",Y),c.ofArray([x(null),B(null),x(null),B(null),x(null),B(null),x(null),o.add(x(null),c.ofArray([g.Tags().text("=")])),x(null),B(null),x(null),B(null),x(null),B(null),x(null)]));Z=a(X.Dom).find(".digit");_0=n.iter(function(_1){return a(Z.get(_1-1)).text($$.String(p.New().Next1(10)));},n.toList(q.range(1,6)));a(function(){return _0;});_3=c.ofArray([X,E]);return g.Tags().NewTag("div",_3);}}}});$.OnInit(function(){a=$.Safe($$.jQuery);b=$.Safe($$.String);c=$.Safe($$.WebSharper.List);d=$.Safe($$.WebSharper.Html);e=$.Safe(d.Client);f=$.Safe(e.Attr);g=$.Safe(e.Tags);h=$.Safe(e.EventsPervasives);i=$.Safe($$.window);j=$.Safe($$.WebSharper.Strings);k=$.Safe($$.WebSharper.Concurrency);l=$.Safe($$.WebSharper.Remoting);m=$.Safe(l.AjaxRemotingProvider);n=$.Safe($$.WebSharper.Seq);o=$.Safe(e.Operators);p=$.Safe($$.WebSharper.Random);return q=$.Safe($$.WebSharper.Operators);});$.OnLoad(function(){return;});}());
